(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,r||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.categoryList=$("#category-select"),this.categoryCheckbox=$("#copy_categories"),this.listen()},t=[{key:"listen",value:function(){var e=this;$(document).on("submit",".import-wordpress-form",this.import.bind(this)),this.categoryCheckbox.on("change",(function(t){e.toggleCategory(t.target.checked)})),$(document).on("click","#category-select .btn-loadmore",(function(t){t.preventDefault();var r=$(t.currentTarget);r.attr("href")&&e.loadCategory(r.attr("href"))}))}},{key:"toggleCategory",value:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?(this.categoryList.slideDown(),this.categoryList.hasClass("loaded")||setTimeout(this.loadCategory.bind(this),500)):this.categoryList.slideUp()}},{key:"loadCategory",value:function(e){var t=this.categoryList.find("ul");if(!this.categoryList.hasClass("loaded")||t.find("li").length){var r=this.categoryList.find(".btn-loadmore");this.categoryList.addClass("loaded"),this.call({url:e||"/api/v1/categories",beforeSend:function(){r.addClass("button-loading")},complete:function(){r.removeClass("button-loading")}}).then((function(e){var o;!e.error&&e.data.length&&(e.data.forEach((function(e,r){t.append('<li class="category-id-'.concat(e.id,'">\n                            <label for="category-id-').concat(e.id,'" class="control-label">\n                                <input type="radio" value="').concat(e.id,'" name="default_category_id" id="category-id-').concat(e.id,'">\n                                <span>').concat(e.name,"</span>\n                            </label>\n                        </li>"))})),null!==(o=e.links)&&void 0!==o&&o.next?r.attr("href",e.links.next).removeClass("d-none"):r.attr("href","").addClass("d-none"))}))}}},{key:"import",value:function(e){e.preventDefault();var t=$(e.currentTarget);$(".wordpress-importer .alert").addClass("hidden");var r=t.find("button[type=submit]");this.call({type:"POST",url:t.prop("action"),data:new FormData(t[0]),beforeSend:function(){r.addClass("button-loading")},complete:function(){r.removeClass("button-loading")}}).then((function(e){e.error?(Botble.showError(e.message),$(".wordpress-importer .error-message").removeClass("hidden").text(e.message)):(Botble.showSuccess(e.message),$(".wordpress-importer .success-message").removeClass("hidden").text(e.message))})).catch((function(e){Botble.handleError(e)}))}},{key:"call",value:function(e){return new Promise((function(t,o){$.ajax(r(r({type:"GET",contentType:!1,processData:!1},e),{},{success:function(e){t(e)},error:function(e){o(e)}}))}))}}],t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}();$((function(){new i}))})();